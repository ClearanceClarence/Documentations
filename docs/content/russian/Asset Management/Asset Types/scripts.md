+++
title = "Скрипты"
description = ""
weight = 1
+++

Компоненты сценария - это исполняемые сценарии, которые прикрепляются к объектам и могут использоваться для реализации различных функций игрового процесса. В Bannerlord большая часть игровой логики написана через компоненты скрипта. Например стулья, брошенное оружие, осадные машины. Есть много разных обратных вызовов, которые могут быть унаследованы и заполнены этими компонентами скрипта.

##### Обратные вызовы

* **Constructor**: В конструкторе необходимо присвоить значения по умолчанию его общедоступным переменным (переменные, которые могут быть изменены создателем сцены). В конструкторе компонент скрипта не назначается ни объекту, ни сцене. Кроме того, вы не должны писать никакой логики, которая имеет побочный эффект, потому что, даже если он создан, компонент сценария может быть удален после открытия сцены из-за системы обновления уровней.
* **OnPreInit**: Вызывается после того, как компонент сценария назначается его сущности-владельцу в сцене. Как только вы перейдете в этот обратный вызов, вы можете быть уверены, что пользовательские переменные из этого экземпляра скрипта установлены. Однако другие компоненты сценария других сущностей еще не могут быть назначены. Таким образом, в предварительной инициализации не должно быть никакого логического кода, который полагается на другие компоненты скрипта. Например, в предварительной инициализации ManagedObject регистрируется в массиве управляемых объектов в текущем экземпляре миссии.
* **OnInit**: Вызывается после загрузки миссии и инициализации всех скриптовых компонентов сущностей. Вы можете использовать любой тип логического кода внутри этого обратного вызова. Скрипты, созданные во время выполнения, также получают этот обратный вызов.
* **OnEditorInit**: Версия инициализации для редактора. Вызывается при загрузке сцены из редактора. Помните, что в редакторе нет миссии или состояния игры.
* **OnTick**: Вызывается для каждого компонента сценария в каждом кадре миссии из одного и того же потока.
* **OnEditorTick**: Версия функции OnTick для редактора. 
* **IsOnlyVisual**: Если у вас есть компонент сценария, который является только визуальным и не имеет логического кода, который должен выполняться на выделенном сервере, вы должны вернуть true в этой функции. Это гарантирует, что этот тип сценариев не будет работать на выделенном сервере.
* **OnEditorVariableChanged**: Вызывается в редакторе всякий раз, когда пользователь изменяет общедоступную переменную в этом компоненте скрипта. Этот обратный вызов может использоваться для любого изменения состояния визуальной логики, если художнику нужна мгновенная обратная связь на сцене редактора.
* **OnRemoved**: Вызывается при удалении объекта или компонента скрипта. Если у вас есть какие-либо выделенные объекты, которые хранятся где-то еще (например, статические контейнеры), вы можете использовать этот обратный вызов, чтобы убедиться, что они не просочились.