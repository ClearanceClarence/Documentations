+++
title = "场景生成点指南"

[menu.main]
identifier = "scene_spawn_point_guide"
parent = "bannerlord_scenes"
+++

## 如何在Bannerlord中设计功能齐全的场景

每个场景都需要有一定的必备元素以避免游戏崩溃，并提供额外的功能，为玩家带来更好的体验。设计人员可以使用 !["Spawn Point Debug Tool"](http://rglwebserver.taleworlds.com:1313/spawn_point_debug_tool/) 检查这些必要性，以确保其场景不会崩溃。

## 1. 城市中心场景

如果玩家是第一次进入城市，将在“ sp_player_outside”预制件上生成玩家，因此，“sp_player_outside”必须放置在离城市入口有一段距离的位置；否则，将在“sp_player”上生成玩家，并且该生成点可以在入口大门旁边。城镇中心场景具有一些必要字段，如下所示：

| 玩家生成点 |
|-----|
|当玩家从地图场景的右上方面板进入城镇中心时，玩家和对话NPC将在“sp_player_conversation”预制件上生成。为了增加变化，场景必须使这些预制件总数大于1。{{％notice warning％}} {{% notice warning %}} conversation预制的规模无法改动。
{{% /notice %}}|

|贸易商|
|-----|
|镇中心场景中必须强制使用盔甲匠，铁匠和马商等商人。如果场景具有多个市场，则可以拥有一个以上的交易员NPC。市场上的交易者可能有自己的集合。这些集合可以被视为带有某些生成点的预制件。例如武器匠，武器匠集合中可以有3个定位点，但必须有1个已刷出的武器匠。这个NPC会随机到达这些点，也就是说NPC可能会去他/她的销售台开始交易，或者去他/她的商店的后方坐在椅子上一段时间。{{% notice tip %}} 设计者可能希望使用“ MinWaitInSeconds”和“ MaxWaitInSeconds”参数来更改两次操作之间的等待时间。（-1表示永远不会改变位置）。
{{% /notice %}}|

|要人|
|-----|

## 要人的父级预制件

场景一定要有一些要人。为了能轻松找到它们，必须在城市中心区域附近放置明显的生成点。
每个要人都有自己的生成点标签和自己独特的助手。

| 要人 | 生成点标签 | 专属助手标签 |
| ------ | ------ | ------ | 
| **牧师** | sp_notable_preacher | sp_preacher_notary |
| **帮派头目** | sp_notable_gangleader | sp_gangleader_bodyguard |
| **乡老** | sp_notable_rural_notable | sp_rural_notable_notary |
| **工匠** | sp_notable_artisan | sp_artisan_notary |
| **商人** | sp_notable_merchant | sp_merchant_notary |

要人有一个名为**"sp_notables_parent"** 的父级预制件。每个要人有1个子集，因此，父级预制体有5个子级要人的集合。

mod制作者必须将这个父级预制件放到市中心的显眼位置。玩家也必须容易看到预制件。场景开始后，游戏逻辑将根据镇中心的标记激活标记集。

在要人的集合中，每个要人将具有专属辅助角色以及它们的生成点。（帮派头目的打手，商人的公证人等等）。

下面的图片中。现场有2个父级预制件。场景开始后，将为**帮派头目**和她的打手激活一个预制件。**商人**及其公证人激活了另一个预制件。

{{% notice tip %}}
每个定居点最多只能有6位知名人士，每个村庄最多可以有3位知名人士。因此，mod制作者必须考虑到这一点，并为城镇中心场景放置至少8个父级预制件，并为乡村场景放置至少5个父级预制件。市中心有3个工场。每个工场必须有1个父级预制件。
因此城市中心场景必须有 8 + 3 (工场) ~ 10个父级预制件.
{{% /notice %}}

{{% notice warning %}}
值得注意的是要人集合中的所有定位点都会根据其运动捕捉动画进行旋转，因此不要旋转这些点，否则动画将无法同步。
{{% /notice %}}

![](/img/notable_spawn_points/document1.png)

|守卫(guards)|
|-----|
|有一些闲散的警卫和巡逻警卫。巡逻警戒被编程为将一个点移动到另一个点，同时激活下一个点并禁用当前点。|

|通道(Passages)|
|-----|
|市中心的场景必须包括到其他场景的所有通道，例如小酒馆，竞技场，领主大厅。..|

|战斗区域(Battle Sets)|
|-----|
|对于城镇场景，战场仅用于公共区域的清理。因此，它们之间不应相距太远，应放置在代表帮派之间的战斗而不是军队之间的战斗的位置。|

|镇民(Townsfolk)|
|-----|
|NPC总是在城市中移动。为了美化场景，设计人员可能希望使用一些额外的预制件。如果场景具有“sp_npc_repair_set”，则一个NPC将到达该点并开始攻击周围，而其他NPC则抱怨情况或场景可能会有一些乞乞乞求镇民的帮助。|


## 2. 小酒馆场景（Tavern）

|玩家生成点|
|-----|
|玩家的Spawnpoint，“ sp_player”，必须放置在通向市中心的通道附近。场景必须至少包含一个或多个“sp_player_conversation”预制件。
{{% notice warning %}} 
对话预制件数量不可更改
{{% /notice %}}|

|游戏发起人（赌徒NPC）|
|-----|
|每个小酒馆场景都必须有一个赌徒（游戏发起人）NPC。NPC下方的椅子必须同时具有“gambler_npc”和“npc_wait”标签。玩家将用来加入游戏的椅子必须同时具有“gambler_player”和“reserved”标签。

## 3. 领主大厅场景

|玩家生成点|
|-----|
|领主大厅场景的玩家生成点与小酒馆场景相同。玩家的生成点必须放置在通向市中心的通道附近。|

## 4. 乡村场景

|玩家生成点|
|-----|
|乡村场景没有“ sp_player_outside”预制件。不能将“ sp_player”预制件放置在离村中心很远的地方，也不能太近。生成时，玩家必须从远处看到步行的村民。当玩家从地图场景的右上方面板进入村庄时，玩家和对话NPC将在“sp_player_conversation”预制板上生成。场景必须具有多个这些预制件，以增加变化。{{% notice warning %}}对话预制件的规模不得更改。
{{% /notice %}}|

|要人|
|-----|
|场景一定要有一些要人。为了轻松找到它们，必须在乡村中心区域附近放置明显的生成点。|

|村民|
|-----|
|村民在村中心有很多额外的活动，例如收集葡萄，修理东西或梳马。这些活动必须在体育活动和社交活动之间取得平衡。村民NPC可能会去清理墙壁，然后坐下来与他人聊天。|

|公共区域|
|-----|
|每个村庄都有3个不在村庄中心的公共区域。在公共区域内可以使用任何类型的生成点。应放置“common_area_NUMBER”预制件以指定区域。该预制件带有一个名为“CommonAreaScript”的脚本。该脚本具有一些参数，如下所示：|
|AreaRadius : 艺术家可以更改此参数脚本以扩展或缩小区域。 |
|AreaIndex : 已在三个常见区域的预制件中设置 |
|Type : 区域类型应从下面的列表中设置 |

|区域类型|场景|说明|
|-----|-----|-----|
Backstreet|市镇中心|生成暴徒的后巷
Clearing|市镇中心|开阔地
Waterfront|市镇中心|靠近海岸或港口
Pasture|乡村|牧场，草料（通常是荒地或沼泽地）
Thicket|乡村|灌木
Bog|乡村|沼泽区
Forest|乡村|很多树木
Ravine|乡村|山谷或峡谷
Spring|乡村|在沙漠里的水坑
Cove|乡村|水湾
Marsh|乡村|河附近的沼泽地区
Wadi|乡村|山谷，两边都没有岩石

|战场生成点(Battle Spawnpoints)|
|-----|
|如果游戏使用战斗模式打开场景，将会初始化参战部队。参战部队双方必须彼此远离，并牢记防御者和攻击者的方向。|




